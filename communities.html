<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <title>psn-php by Tustin | Communities</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="stylesheets/styles.css">
    <style> 
    hr {
      border-top: 1px solid #bbb;
    }

    </style>
    <meta name="viewport" content="width=device-width">

    <meta property="og:title" content="PHP wrapper for the PSN API" />
    <meta property="og:image" content="https://www.playstation.com/en-gb/content/dam/sitefurniture/psn-status/meganav/meganav-icon-get-help-network-status-01-eu-09sep15.png" />
    <meta property="og:url" content="https://tustin.github.io/psn-php/" />
    <meta property="og:description" content="Easy to use PHP wrapper to communicate with the PSN API" />

    <meta itemprop="name" content="psn-php">
    <meta itemprop="description" content="Easy to use PHP wrapper to communicate with the PSN API">
    <meta itemprop="image" content="https://www.playstation.com/en-gb/content/dam/sitefurniture/psn-status/meganav/meganav-icon-get-help-network-status-01-eu-09sep15.png">
    <meta itemprop="codeRepository" content="https://github.com/tustin/psn-php">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@Tusticles" />
    <meta name="twitter:title" content="PHP wrapper for the PSN API" />
    <meta name="twitter:description" content="Easy to use PHP wrapper to communicate with the PSN API" />
    <meta name="twitter:image" content="https://www.playstation.com/en-gb/content/dam/sitefurniture/psn-status/meganav/meganav-icon-get-help-network-status-01-eu-09sep15.png" />
    <meta name="twitter:url" content="https://tustin.github.io/psn-php/" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">psn-php</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="https://github.com/tustin/psn-php"><i class="fa fa-code"></i> Code</a></li>
            <li><a href="index.html">Getting Started</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Features <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="auth.html">Authenticating with PSN</a></li>
                  <li role="separator" class="divider"></li>
                  <li><a href="user.html">User</a></li>
                  <li><a href="friends.html">Friends</a></li>
                  <li><a href="trophies.html">Trophies</a></li>
                  <li><a href="messaging.html">Messaging</a></li>
                  <li><a href="communities.html">Communities</a></li>
                </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav pull-right">
            <li><a href="https://github.com/tustin/psn-php/issues"><img src="https://img.shields.io/github/issues/Tustin/psn-php.svg"></a></li>
            <li><a href="https://github.com/Tustin/psn-php/stargazers"><img src="https://img.shields.io/github/stars/Tustin/psn-php.svg"></a></li>
            <li><a href="https://raw.githubusercontent.com/Tustin/psn-php/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg"></a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <i>Thanks to <a href="https://github.com/Octolus" target="_blank">Octolus</a> for helping with a lot of these functions</i>
      <h3>Setting Up</h3>
      <hr>
      <p>The Communities class is a bit different from the other classes in this library. This class requires the 'npsso' of the account, which does not exist in the tokens array generated by GrabNewTokens. The only way to get this 'npsso' id is by saving it after the initial login using credientials and grabbing it from the array that GetTokens returns. This is due to how Sony setup the communities API as it requires seperate permissions than what the normal OAuth tokens provide:</p>
      <pre>$communities = new \PSN\Communities($tokens);</pre><br>
      <p>You can now use $communities to make requests related to the logged in user's communities.</p>

      <h3>GetCommunity($communityId [, $limit = 100 ])</h3>
      <hr>
      <p>GetCommunity takes one argument, which is the ID of the community. This method also accepts an optional second argument which is the limit of how many users are returned:</p>
      <pre>$community = $communities->GetCommunity('e6cfa830-d918-11e6-873a-068cad313d9c');
//you can use var_dump to see the contents of this object
var_dump($community);     
</pre>
      <h3>GetMyCommunities([ $limit = 100 ])</h3>
      <hr>
      <p>GetMyCommunities takes no arguments, but does accept an optional argument which is the limit of how many communties are returned:</p>
      <pre>$my_communities = $communities->GetMyCommunities();
//you can use var_dump to see the contents of this object
var_dump($my_communities);     
</pre>

      <h3>GetCommunityThreads($communityId)</h3>
      <hr>
      <p>GetCommunityThreads takes one argument, which is the ID of the community you want to get the threads from. This function returns all the threads in a community, which consists of the list of messages in the group and the message of the day:</p>
      <pre>$community_threads = $communities->GetCommunityThreads('e6cfa830-d918-11e6-873a-068cad313d9c');
//you can use var_dump to see the contents of this object
var_dump($community_threads);     
</pre>

      <h3>GetMessageReplies($communityId, $threadId, $replyId [, $limit = 100])</h3>
      <hr>
      <p>GetMessageReplies takes three arguments:
        <ul> 
          <li>$communityId - ID of the community</li>
          <li>$threadId - ID of the thread</li>
          <li>$replyId - ID of the reply in the thread (aka the message itself)</li>
          <li>$limit - Optional argument. Limits how many replies get returned</li>
        </ul>
      </p>
      <pre>$message_replies = $communities->GetMessageReplies('e6cfa830-d918-11e6-873a-068cad313d9c', 'thread-id', 'reply-id');
//you can use var_dump to see the contents of this object
var_dump($message_replies);     
</pre>

      <h3>GetCommunityInfo($communityId)</h3>
      <hr>
      <p>GetCommunityInfo takes one argument, which is the ID of community to get info for:</p>
      <pre>$community = $communities->GetCommunityInfo('e6cfa830-d918-11e6-873a-068cad313d9c');
//you can use var_dump to see the contents of this object
var_dump($community);     
</pre>

      <h3>PostMessageReply($communityId, $threadId, $replyId, $message)</h3>
      <hr>
      <p>PostMessageReply takes four arguments:
        <ul> 
          <li>$communityId - ID of the community</li>
          <li>$threadId - ID of the thread</li>
          <li>$replyId - ID of the reply in the thread (aka the message itself)</li>
          <li>$message - The message you want to reply with</li>
        </ul>
      </p>
      <pre>$communities->PostMessageReply('e6cfa830-d918-11e6-873a-068cad313d9c', 'thread-id', 'reply-id', 'its only smellz');</pre>

      <h3>GetNotifications($communityId [, $replies = FALSE, $wall = FALSE])</h3>
      <hr>
      <p>GetNotifications one argument, which is the ID of the community you want to get notifications for. There are also two optional arguments:
        <ul> 
          <li>$replies - Bool value, will specify whether to return reply notifications or not</li>
          <li>$wall - Bool value, will specify whether to return new wall messages or not</li>
        </ul>
      </p>
      <pre>$notifications = $communities->GetNotifications('e6cfa830-d918-11e6-873a-068cad313d9c');
//you can use var_dump to see the contents of this object
var_dump($notifications);     
</pre>

      <h3>GetMessagesInThread($communityId, $threadId [, $limit = 100])</h3>
      <hr>
      <p>AddGroupImage takes two arguments:
        <ul> 
          <li>$communityId - ID of the community</li>
          <li>$threadId - ID of the thread</li>
          <li>$limit - Optional argument. Limits how many replies get returned</li>
        </ul>
      </p>
      <pre>$messages = $communities->GetMessagesInThread('e6cfa830-d918-11e6-873a-068cad313d9c', 'thread-id');
//you can use var_dump to see the contents of this object
var_dump($messages);     
</pre>

      <h3>SubmitNewMessage($communityId, $threadId, $message)</h3>
      <hr>
      <p>SubmitNewMessage takes three arguments:
        <ul> 
          <li>$communityId - ID of the community</li>
          <li>$threadId - ID of the thread</li>
          <li>$message - Message that you want to post to the community</li>
        </ul>
      </p>
      <pre>$communities->SubmitNewMessage('e6cfa830-d918-11e6-873a-068cad313d9c', 'thread-id', 'its only smellz');</pre>

      <h3>InviteToCommunity($communityId, $onlineIds)</h3>
      <hr>
      <p>InviteToCommunity takes two arguments:
        <ul> 
          <li>$communityId - ID of the community</li>
          <li>$onlineIds - User(s) you want to add to invite to the community. Can either be an array of users or a single PSN as a string</li>
        </ul>
      </p>
      <pre>$communities->InviteToCommunity('e6cfa830-d918-11e6-873a-068cad313d9c', 'foobar');
//or
$communities->InviteToCommunity('e6cfa830-d918-11e6-873a-068cad313d9c', ['foo', 'bar']);
</pre>

      <h3>SearchCommunitiesByGame($titleId [, $limit = 10])</h3>
      <hr>
      <p>SearchCommunitiesByGame takes one argument, which is the ID of the game you want to search. A normal title ID for a game will look like NPWR07466_00, which is Rocket League. There is also an optional second argument, which limits how many communities to return (some games have a lot of communities!):</p>
      <pre>$game_communities = $communities->SearchCommunitiesByGame('NPWR07466_00');
//you can use var_dump to see the contents of this object
var_dump($game_communities);     
</pre>

      <h3>SearchCommunities($SearchTXT [, $limit = 10])</h3>
      <hr>
      <p>SearchCommunities takes one argument, which is the text you want to search for. There is also an optional second argument, which limits how many communities to return:</p>
      <pre>$search_results = $communities->SearchCommunities('nextgenupdate');
//you can use var_dump to see the contents of this object
var_dump($search_results);     
</pre>

      <h3>DeleteMessage($communityId, $threadId, $messageId)</h3>
      <hr>
      <p>DeleteMessage takes three arguments:
        <ul> 
          <li>$communityId - ID of the community</li>
          <li>$threadId - ID of the thread</li>
          <li>$messageId - ID of the message in the thread you want to delete</li>
        </ul>
      </p>
      <pre>$communities->DeleteMessage('e6cfa830-d918-11e6-873a-068cad313d9c', 'thread-id', 'message-id');</pre>

      <h3>DeleteMessageReply($communityId, $threadId, $parentId, $messageId)</h3>
      <hr>
      <p>DeleteMessageReply takes four arguments:
        <ul> 
          <li>$communityId - ID of the community</li>
          <li>$threadId - ID of the thread</li>
          <li>$parentId - ID of the parent message that the reply is for</li>
          <li>$messageId - ID of the reply you want to delete</li>
        </ul>
      </p>
      <pre>$communities->DeleteMessageReply(e6cfa830-d918-11e6-873a-068cad313d9c', 'thread-id', 'parent-message-id', 'reply-message-id');</pre>

      <h3>LeaveCommunity($communityId)</h3>
      <hr>
      <p>LeaveCommunity takes one argument, which is the ID of the community you want to leave:</p>
      <pre>$communities->LeaveCommunity('e6cfa830-d918-11e6-873a-068cad313d9c');</pre>

      <h3>JoinCommunity($communityId)</h3>
      <hr>
      <p>JoinCommunity takes one argument, which is the ID of the community you want to join:</p>
      <pre>$communities->JoinCommunity('e6cfa830-d918-11e6-873a-068cad313d9c');</pre>


      <h3>KickMembers($communityId, $onlineIds)</h3>
      <hr>
      <p>KickMembers takes two arguments:
        <ul> 
          <li>$communityId - ID of the community you want to kick members from</li>
          <li>$onlineIds - Users you want to kick from the community. Pass as an array.</li>
        </ul>
      </p>
      <pre>$communities->KickMembers('e6cfa830-d918-11e6-873a-068cad313d9c', ['foo', 'bar']);</pre>

      <h3>GetUserRole($communityId, $onlineIds)</h3>
      <hr>
      <p>GetUserRole takes two arguments:
        <ul> 
          <li>$communityId - ID of the community you want to kick members from</li>
          <li>$onlineIds - Users you want to get the role of. Pass as an array.</li>
        </ul>
      </p>
      <pre>$roles = $communities->GetUserRole('e6cfa830-d918-11e6-873a-068cad313d9c', ['foobar']);
//you can use var_dump to see the contents of this object
var_dump($roles);     
</pre>

      <h3>PromoteMember($communityId, $onlineIds [, $promotion = 1])</h3>
      <hr>
      <p>PromoteMember takes two arguments:
        <ul> 
          <li>$communityId - ID of the community you want to kick members from</li>
          <li>$onlineIds - Users you want to get the role of. Pass as an array.</li>
          <li>$promotion - Bool value. 1 for a promotion (moderator), 0 for a demotion (member)</li>
        </ul>
      </p>
      <pre>$communities->PromoteMember('e6cfa830-d918-11e6-873a-068cad313d9c', ['foobar']);</pre>

    </div>
  </body>
  <script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</html>